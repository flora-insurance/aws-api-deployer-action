{"basePath":"/","paths":{"/billing/v1/accounting/creance":{"post":{"summary":"Excecute accounting template creance (3) ","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"accountingCreanceUsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"in":"query","allowEmptyValue":false,"name":"month","format":"int32","x-example":1,"description":"Report date day","type":"integer","required":false},{"in":"query","allowEmptyValue":false,"name":"year","format":"int32","x-example":2020,"description":"Report date day","type":"integer","required":false}],"tags":["accounting-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/accounting/creance","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/public/billing/v1/subscription/gocardless/mandate/token":{"get":{"summary":"Create a mandate token using gocardless DropIn page","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"createGocardlessMandateTokenUsingGET","responses":{"200":{"schema":{"$ref":"#/definitions/CreateGocardlessMandateTokenReponse"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["subscription-resource"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/public/billing/v1/subscription/gocardless/mandate/token","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"get","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'GET'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/scheduler/stripe/fees":{"post":{"summary":"Handle stripe fee in accounting","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"stripeEventUsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["scheduler-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/scheduler/stripe/fees","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/public/billing/v1/subscription":{"post":{"summary":"Create a subscription","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"createPublicSubscriptionUsingPOST","responses":{"200":{"schema":{"$ref":"#/definitions/CreateSubscriptionResponse"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"schema":{"$ref":"#/definitions/CreateSubscription"},"in":"body","name":"createSubscription","description":"createSubscription","required":true}],"tags":["subscription-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/public/billing/v1/subscription","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/scheduler/stripe/notify-expiring-cards":{"post":{"summary":"Send notification to all customer who have a card expiring in 1 month","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"notifyExpiringCardsUsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["scheduler-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/scheduler/stripe/notify-expiring-cards","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/subscriptions/{policyId}/renewals":{"post":{"summary":"Renew a new subscription","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"renewSubscriptionUsingPOST","responses":{"200":{"schema":{"$ref":"#/definitions/RenewSubscriptionResponse"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"in":"path","name":"policyId","description":"policyId","type":"string","required":true},{"schema":{"$ref":"#/definitions/RenewSubscription"},"in":"body","name":"renewSubscription","description":"renewSubscription","required":true}],"tags":["subscription-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/subscriptions/{policyId}/renewals","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{"integration.request.path.policyId":"method.request.path.policyId"},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/public/billing/v1/subscription/validate/paymentMethod/callback/{id}":{"post":{"summary":"Approve payment in paypal","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"validatePaymentMethodCallbackUsingPOST","responses":{"200":{"schema":{"$ref":"#/definitions/ValidatePaymentMethodCallbackResponse"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"in":"path","name":"id","description":"id","type":"string","required":true}],"tags":["subscription-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/public/billing/v1/subscription/validate/paymentMethod/callback/{id}","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{"integration.request.path.id":"method.request.path.id"},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/accounting/prestations":{"post":{"summary":"Excecute accounting template presations (4) ","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"accountingPrestationsUsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"in":"query","allowEmptyValue":false,"name":"month","format":"int32","x-example":1,"description":"Report date day","type":"integer","required":false},{"in":"query","allowEmptyValue":false,"name":"year","format":"int32","x-example":2020,"description":"Report date day","type":"integer","required":false}],"tags":["accounting-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/accounting/prestations","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/structured-communications":{"post":{"summary":"Generate a unique structured communication","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"generateStructuredCommunicationUsingPOST","responses":{"200":{"schema":{"$ref":"#/definitions/StructuredCommunicationResponse"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["payment-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/structured-communications","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/public/billing/v1/subscription/stripe/setupIntent":{"get":{"summary":"get setupIntent, the id provided by this api must be use with confirmCardSetup from Stripe.js in front end (clientSecret)","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"getSetupIntentUsingGET_1","responses":{"200":{"schema":{"$ref":"#/definitions/GetSetupIntentResponse"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["stripe-subscription-resource"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/public/billing/v1/subscription/stripe/setupIntent","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"get","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'GET'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/payments":{"post":{"summary":"Initiate an outgoing payment","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"initiatePaymentUsingPOST","responses":{"200":{"schema":{"$ref":"#/definitions/InitiatePaymentResponse"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"schema":{"$ref":"#/definitions/InitiatePaymentRequest"},"in":"body","name":"request","description":"request","required":true}],"tags":["payment-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/payments","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/subscription/paypal/{subscriptionId}/policyNumber":{"patch":{"summary":"Create a stripe subscription","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"updatePolicyNumberUsingPATCH","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"in":"path","name":"subscriptionId","description":"subscriptionId","type":"string","required":true},{"schema":{"$ref":"#/definitions/UpdatePaypalPolicyNumber"},"in":"body","name":"updatePolicyNumber","description":"updatePolicyNumber","required":true},{"in":"header","name":"x-correlationId","description":"x-correlationId","type":"string","required":true}],"tags":["paypal-subscription-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/subscription/paypal/{subscriptionId}/policyNumber","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{"integration.request.path.subscriptionId":"method.request.path.subscriptionId","integration.request.header.x-correlationId":"method.request.header.x-correlationId"},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"patch","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'PATCH'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-CorrelationId'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/accounting/reserves":{"post":{"summary":"Generate a reserving report","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"initiateReportUsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"in":"query","allowEmptyValue":false,"name":"month","format":"int32","x-example":1,"description":"Report date day","type":"integer","required":false},{"in":"query","allowEmptyValue":false,"name":"year","format":"int32","x-example":2020,"description":"Report date day","type":"integer","required":false}],"tags":["reserve-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/accounting/reserves","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/reminder/{policyId}/level2":{"post":{"summary":"Call reminder level 2 for a policy","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"initiateReminderLevel2UsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"in":"path","name":"policyId","description":"The policy id","type":"string","required":true},{"schema":{"$ref":"#/definitions/ReminderLevel2Request"},"in":"body","name":"reminderLevel2Request","description":"reminderLevel2Request","required":true}],"tags":["reminder-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/reminder/{policyId}/level2","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{"integration.request.path.policyId":"method.request.path.policyId"},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/subscription":{"post":{"summary":"Create a subscription","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"createSubscriptionUsingPOST_2","responses":{"200":{"schema":{"$ref":"#/definitions/CreateSubscriptionResponse"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"schema":{"$ref":"#/definitions/CreateSubscription"},"in":"body","name":"createSubscription","description":"createSubscription","required":true}],"tags":["subscription-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/subscription","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/subscription/cancel":{"post":{"summary":"Create a stripe subscription","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"cancelSubscriptionUsingPOST","responses":{"200":{"schema":{"$ref":"#/definitions/CancelSubscriptionResponse"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"schema":{"$ref":"#/definitions/Cancel"},"in":"body","name":"cancel","description":"cancel","required":true},{"in":"header","name":"x-correlationId","description":"x-correlationId","type":"string","required":true}],"tags":["subscription-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/subscription/cancel","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{"integration.request.header.x-correlationId":"method.request.header.x-correlationId"},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-CorrelationId'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/reminder/{policyId}":{"post":{"summary":"Call reminder level for a policy","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"initiateReminderLevelUsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"in":"path","name":"policyId","description":"The policy id","type":"string","required":true},{"in":"query","name":"reminderLevel","description":"reminderLevel","type":"string","required":true,"enum":["Level0","Level1","Level2","Level3","Level4"]}],"tags":["reminder-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/reminder/{policyId}","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{"integration.request.path.policyId":"method.request.path.policyId"},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/claims/{claimId}/reserve":{"put":{"summary":"Create or a update a reserve related to a claim","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"initiatePaymentUsingPUT","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"in":"path","name":"claimId","description":"The claim id","type":"string","required":true},{"schema":{"$ref":"#/definitions/UpsertReserveRequest"},"in":"body","name":"request","description":"request","required":true}],"tags":["reserve-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/claims/{claimId}/reserve","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{"integration.request.path.claimId":"method.request.path.claimId"},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"put","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'PUT'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/scheduler/subscriptions/cancel":{"post":{"summary":"Handle stripe fee in accounting","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"cancelSubscriptionSchedulerUsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["scheduler-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/scheduler/subscriptions/cancel","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/subscription/stripe/card-refresh":{"post":{"summary":"call Stripe to retrieve the credit card number (last 4 digits) and stores it in Salesforce","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"refreshCardNumberUsingPOST","responses":{"200":{"schema":{"$ref":"#/definitions/RefreshCardNumberResponse"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["stripe-subscription-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/subscription/stripe/card-refresh","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/subscription/paypal":{"post":{"summary":"Create a stripe subscription","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"createSubscriptionUsingPOST","responses":{"200":{"schema":{"$ref":"#/definitions/CreatePaypalSubscriptionResponse"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"schema":{"$ref":"#/definitions/CreatePaypalSubscription"},"in":"body","name":"createSubscription","description":"createSubscription","required":true},{"in":"header","name":"x-correlationId","description":"x-correlationId","type":"string","required":true}],"tags":["paypal-subscription-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/subscription/paypal","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{"integration.request.header.x-correlationId":"method.request.header.x-correlationId"},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-CorrelationId'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/subscription/stripe/card/{paymentMethod}":{"get":{"summary":"get card using is id","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"getCardUsingGET","responses":{"200":{"schema":{"$ref":"#/definitions/CardInfo"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"in":"path","name":"paymentMethod","description":"paymentMethod","type":"string","required":true},{"in":"header","name":"x-correlationId","description":"x-correlationId","type":"string","required":true}],"tags":["stripe-subscription-resource"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/subscription/stripe/card/{paymentMethod}","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{"integration.request.path.paymentMethod":"method.request.path.paymentMethod","integration.request.header.x-correlationId":"method.request.header.x-correlationId"},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"get","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'GET'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-CorrelationId'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/subscriptions/{policyId}/switch":{"post":{"summary":"Switch to a new subscription","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"switchSubscriptionUsingPOST","responses":{"200":{"schema":{"$ref":"#/definitions/SwitchSubscriptionResponse"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"in":"path","name":"policyId","description":"policyId","type":"string","required":true},{"schema":{"$ref":"#/definitions/SwitchSubscription"},"in":"body","name":"switchSubscription","description":"switchSubscription","required":true}],"tags":["subscription-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/subscriptions/{policyId}/switch","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{"integration.request.path.policyId":"method.request.path.policyId"},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/subscription/stripe/card":{"patch":{"summary":"Update card for subscription linked to a policy","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"updateCardUsingPATCH","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"schema":{"$ref":"#/definitions/PatchStripePaymentMethodRequest"},"in":"body","name":"request","description":"request","required":true}],"tags":["stripe-subscription-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/subscription/stripe/card","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"patch","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'PATCH'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/subscription/stripe":{"post":{"summary":"Create a stripe subscription","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"createSubscriptionUsingPOST_1","responses":{"200":{"schema":{"$ref":"#/definitions/CreateStripeSubscriptionResponse"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"schema":{"$ref":"#/definitions/CreateStripeSubscription"},"in":"body","name":"createSubscription","description":"createSubscription","required":true},{"in":"header","name":"x-correlationId","description":"x-correlationId","type":"string","required":true}],"tags":["stripe-subscription-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/subscription/stripe","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{"integration.request.header.x-correlationId":"method.request.header.x-correlationId"},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-CorrelationId'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/subscription/stripe/notify-expiring-cards":{"post":{"summary":"Send notification to all customer who have a card expiring in 1 month","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"notifyExpiringCardsUsingPOST_1","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["stripe-subscription-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/subscription/stripe/notify-expiring-cards","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/accounting/facturier":{"post":{"summary":"Excecute accounting template facurier (5) ","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"accountingFacturierUsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"in":"query","allowEmptyValue":false,"name":"month","format":"int32","x-example":1,"description":"Report date day","type":"integer","required":false},{"in":"query","allowEmptyValue":false,"name":"year","format":"int32","x-example":2020,"description":"Report date day","type":"integer","required":false}],"tags":["accounting-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/accounting/facturier","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/public/billing/v1/reminder/payments/{policyId}":{"get":{"summary":"Generate a payment for unpaid subscription","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"initiatePaymentReminderUsingGET","responses":{"200":{"schema":{"$ref":"#/definitions/PaymentReminderResponse"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"in":"path","name":"policyId","description":"The user id (cognito id)","type":"string","required":true}],"tags":["reminder-resource"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/public/billing/v1/reminder/payments/{policyId}","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{"integration.request.path.policyId":"method.request.path.policyId"},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"get","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'GET'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/subscription/changeEmail":{"put":{"summary":"updateCustomer","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"updateCustomerUsingPUT","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"schema":{"$ref":"#/definitions/ChangeEmail"},"in":"body","name":"changeEmail","description":"changeEmail","required":true}],"tags":["subscription-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/subscription/changeEmail","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"put","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'PUT'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/scheduler/accounting/balance":{"post":{"summary":"Handle stripe fee in accounting","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"initReportTemplateBalanceUsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["scheduler-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/scheduler/accounting/balance","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/subscription/stripe/portal-links":{"post":{"summary":"Create a link so the mobile app can redirect the user to the Stripe portal to update his credit card number.<br/>This link is valid during a limited period of time","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"createStripePortalLinkUsingPOST","responses":{"200":{"schema":{"$ref":"#/definitions/CreatePortalLinkResponse"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["stripe-subscription-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/subscription/stripe/portal-links","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/accounting/stripeFee":{"post":{"summary":"Excecute accounting template Stripe fee ","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"accountingStripeFeeUsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"in":"query","allowEmptyValue":false,"name":"month","format":"int32","x-example":1,"description":"Report date day","type":"integer","required":false},{"in":"query","allowEmptyValue":false,"name":"year","format":"int32","x-example":2020,"description":"Report date day","type":"integer","required":false}],"tags":["accounting-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/accounting/stripeFee","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/scheduler/payments/reconcillation":{"post":{"summary":"Handle stripe fee in accounting","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"reconciliatePaymentsUsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["scheduler-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/scheduler/payments/reconcillation","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/accounting/production":{"post":{"summary":"Excecute accounting template production (2) ","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"accountingProductionUsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"in":"query","allowEmptyValue":false,"name":"month","format":"int32","x-example":1,"description":"Report date day","type":"integer","required":false},{"in":"query","allowEmptyValue":false,"name":"year","format":"int32","x-example":2020,"description":"Report date day","type":"integer","required":false}],"tags":["accounting-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/accounting/production","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/events/accounting":{"post":{"summary":"Create a new accounting event. These events are then processed once per month to build accounting reports","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"accountingEventUsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"schema":{"$ref":"#/definitions/EventAccounting"},"in":"body","name":"event","description":"event","required":true},{"in":"header","name":"x-api-key","description":"x-api-key","type":"string","required":false}],"tags":["event-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/events/accounting","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{"integration.request.header.x-api-key":"method.request.header.x-api-key"},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/accounting/balance":{"post":{"summary":"Excecute accounting template Stripe fee ","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"accountingBalanceUsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["accounting-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/accounting/balance","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/accounting/accounting-entries":{"post":{"summary":"Excecute accounting template 1 ","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"accountingUsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"in":"query","allowEmptyValue":false,"name":"day","format":"int32","x-example":30,"description":"Report date day","type":"integer","required":false},{"in":"query","allowEmptyValue":false,"name":"month","format":"int32","x-example":1,"description":"Report date day","type":"integer","required":false},{"in":"query","allowEmptyValue":false,"name":"year","format":"int32","x-example":2020,"description":"Report date day","type":"integer","required":false}],"tags":["accounting-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/accounting/accounting-entries","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/payments/reconciliationFromS3":{"post":{"summary":"Excecute payment reconciliation from S3 file","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"paymentReconciliationFromS3UsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"in":"query","allowEmptyValue":false,"name":"filename","x-example":"file.xml","description":"filename","type":"string","required":true}],"tags":["payment-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/payments/reconciliationFromS3","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/public/billing/v1/health":{"get":{"summary":"Get the health of the service","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"publicHealthUsingGET","responses":{"200":{"schema":{"$ref":"#/definitions/Health"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["health-resource"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/public/billing/v1/health","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"get","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'GET'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/public/billing/v1/subscription/validate/paymentMethod":{"post":{"summary":"Valide payment method in stripe or paypal","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"validatePaymentMethodUsingPOST","responses":{"200":{"schema":{"$ref":"#/definitions/ValidatePaymentMethodResponse"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"schema":{"$ref":"#/definitions/ValidatePaymentMethod"},"in":"body","name":"validatePaymentMethod","description":"validatePaymentMethod","required":true}],"tags":["subscription-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/public/billing/v1/subscription/validate/paymentMethod","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/public/billing/v1/mollieSubscription":{"post":{"summary":"Create a mollie subscription","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"createMollieSubscriptionUsingPOST","responses":{"200":{"schema":{"$ref":"#/definitions/CreateSubscriptionResponse"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"schema":{"$ref":"#/definitions/CreateSubscription"},"in":"body","name":"createSubscription","description":"createSubscription","required":true}],"tags":["subscription-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/public/billing/v1/mollieSubscription","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/payments/reconciliation":{"post":{"summary":"Excecute payment reconciliation from S3 file","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"paymentReconciliationUsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["payment-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/payments/reconciliation","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/scheduler/reminders/level2":{"post":{"summary":"Handle reminder of level 2","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"reminderLevel2UsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["scheduler-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/scheduler/reminders/level2","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/scheduler/reminders/level1":{"post":{"summary":"Handle reminder of level 1","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"reminderLevel1UsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["scheduler-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/scheduler/reminders/level1","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/scheduler/reminders/level4":{"post":{"summary":"Handle reminder of level 4","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"reminderLevel4UsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["scheduler-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/scheduler/reminders/level4","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/subscription/stripe/setupIntent":{"get":{"summary":"get setupIntent, the id provided by this api must be use with confirmCardSetup from Stripe.js in front end (clientSecret)","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"getSetupIntentUsingGET","responses":{"200":{"schema":{"$ref":"#/definitions/GetSetupIntentResponse"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"in":"query","name":"paymentMethod","description":"paymentMethod","type":"string","required":false}],"tags":["stripe-subscription-resource"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/subscription/stripe/setupIntent","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"get","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'GET'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/scheduler/reminders/level3":{"post":{"summary":"Handle reminder of level 3","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"reminderLevel3UsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["scheduler-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/scheduler/reminders/level3","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/payments/resendToBelfius":{"post":{"summary":"Excecute payment reconciliation ","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"resendToBelfiusUsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"in":"query","allowEmptyValue":false,"name":"filename","x-example":"file.xml","description":"filename","type":"string","required":true}],"tags":["payment-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/payments/resendToBelfius","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/subscription/gocardless/mandate":{"post":{"summary":"Create a mandate using gocardless hosted page","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"createGocardlessMandateUsingPOST","responses":{"200":{"schema":{"$ref":"#/definitions/CreateGocardlessMandateReponse"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"schema":{"$ref":"#/definitions/CreateGocardlessMandate"},"in":"body","name":"createGocardlessMandate","description":"createGocardlessMandate","required":true}],"tags":["subscription-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/subscription/gocardless/mandate","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/subscription/stripe/scheduleSubscription/{scheduleSubscriptionId}/policyNumber":{"patch":{"summary":"Create a stripe subscription","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"updatePolicyNumberUsingPATCH_1","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"in":"path","name":"scheduleSubscriptionId","description":"scheduleSubscriptionId","type":"string","required":true},{"schema":{"$ref":"#/definitions/UpdateStripePolicyNumber"},"in":"body","name":"updatePolicyNumber","description":"updatePolicyNumber","required":true},{"in":"header","name":"x-correlationId","description":"x-correlationId","type":"string","required":true}],"tags":["stripe-subscription-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/subscription/stripe/scheduleSubscription/{scheduleSubscriptionId}/policyNumber","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{"integration.request.path.scheduleSubscriptionId":"method.request.path.scheduleSubscriptionId","integration.request.header.x-correlationId":"method.request.header.x-correlationId"},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"patch","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'PATCH'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-CorrelationId'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/scheduler/accounting/stripe-fees":{"post":{"summary":"Handle accounting entries","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"stripeFeeReportUsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["scheduler-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/scheduler/accounting/stripe-fees","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/scheduler/accounting/reserving/template1":{"post":{"summary":"Handle stripe fee in accounting","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"reservingTemplate1UsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["scheduler-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/scheduler/accounting/reserving/template1","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/scheduler/accounting/reserving/template2":{"post":{"summary":"Handle stripe fee in accounting","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"reservingTemplate2UsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["scheduler-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/scheduler/accounting/reserving/template2","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/accounting/reserving/production":{"post":{"summary":"Excecute accounting template reserving production","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"accountingReservingProductionUsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"in":"query","allowEmptyValue":false,"name":"month","format":"int32","x-example":1,"description":"Report date day","type":"integer","required":false},{"in":"query","allowEmptyValue":false,"name":"year","format":"int32","x-example":2020,"description":"Report date day","type":"integer","required":false}],"tags":["accounting-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/accounting/reserving/production","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/scheduler/subscription/switch-cancel":{"post":{"summary":"Cancel the old subscription for the switch payment mean","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"cancelOldSubscriptionsUsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["scheduler-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/scheduler/subscription/switch-cancel","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/scheduler/accounting/template5":{"post":{"summary":"Handle stripe fee in accounting","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"template5UsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["scheduler-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/scheduler/accounting/template5","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/scheduler/accounting/template3":{"post":{"summary":"Handle accounting debt","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"template3UsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["scheduler-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/scheduler/accounting/template3","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/subscription/{partyId}/nextPaymentSystem":{"get":{"summary":"getNexPaymentSystem","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"getNexPaymentSystemUsingGET","responses":{"200":{"schema":{"$ref":"#/definitions/NextPaymentSystemResponse"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"parameters":[{"in":"path","name":"partyId","description":"partyId","type":"string","required":true}],"tags":["subscription-resource"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/subscription/{partyId}/nextPaymentSystem","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{"integration.request.path.partyId":"method.request.path.partyId"},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"get","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'GET'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/health":{"get":{"summary":"Get the health of the service","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"healthUsingGET","responses":{"200":{"schema":{"$ref":"#/definitions/Health"},"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["health-resource"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/health","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"get","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'GET'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/scheduler/accounting/template4":{"post":{"summary":"Handle stripe fee in accounting","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"template4UsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["scheduler-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/scheduler/accounting/template4","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/scheduler/accounting/template1":{"post":{"summary":"Handle accounting entries","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"template1UsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["scheduler-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/scheduler/accounting/template1","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}},"/billing/v1/scheduler/accounting/template2":{"post":{"summary":"Handle accounting benefit","security":[{"apiKey":["global"]}],"deprecated":false,"produces":["*/*"],"operationId":"template2UsingPOST","responses":{"200":{"description":"OK","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"400":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Business error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"500":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Internal error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}},"502":{"schema":{"$ref":"#/definitions/JsonException"},"description":"Technical error","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}}}}},"tags":["scheduler-resource"],"consumes":["application/json"],"x-amazon-apigateway-integration":{"uri":"https://${stageVariables.VPCNLB}/test1-exp-v1/billing/v1/scheduler/accounting/template2","responses":{"default":{"statusCode":"200"}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"requestParameters":{},"passthroughBehavior":"when_no_match","connectionType":"VPC_LINK","connectionId":"${stageVariables.VPCLINK}","httpMethod":"post","type":"http_proxy"}},"options":{"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"type":"string"},"Access-Control-Allow-Methods":{"type":"string"},"Access-Control-Allow-Headers":{"type":"string"}},"schema":{"$ref":"#/definitions/Empty"}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'POST'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'"}}},"requestTemplates":{"application/json":"{\"statusCode\": 200}"},"passthroughBehavior":"when_no_match","type":"mock"}}}},"host":"localhost:8080","securityDefinitions":{"apiKey":{"in":"header","name":"Authorization","type":"apiKey"}},"definitions":{"JsonException":{"type":"object","title":"JsonException","required":["code","id","message"],"properties":{"trace":{"description":"The stack trace of the JAVA exception. Currently not sent","type":"string"},"code":{"description":"A code that identify the type of error. Can be used by a front end system to display an error message in the correct language","type":"string"},"id":{"description":"ID that identifies uniquely an error that occured. This value can be used in Kibana to find the call in error. This ID can be displayed to a end user","type":"string"},"message":{"description":"A message that describes the error. This message is generic to not send critical data to a end user. The detail of the error is available in the logs","type":"string"},"params":{"description":"This can be used by a front end system to display an error message with dynamic placeholder","type":"object"}}},"PatchStripePaymentMethodRequest":{"type":"object","title":"PatchStripePaymentMethodRequest","required":["paymentMethod"],"properties":{"paymentMethod":{"description":"The new payment method","type":"string"}}},"Invoice":{"type":"object","title":"Invoice","required":["amountExcludingTax","amountIncludingTax","providerAddress","providerCountryCode","providerInvoiceNumber","providerName","providerPostalCode","providerTvaNumber"],"properties":{"providerCountryCode":{"description":"Provider country code","type":"string"},"providerInvoiceNumber":{"description":"Provider invoice number","type":"string"},"providerAddress":{"description":"Provider address","type":"string"},"providerPostalCode":{"description":"Provider postal code","type":"string"},"amountExcludingTax":{"format":"double","description":"Invoice amount without tax","type":"number"},"providerTvaNumber":{"description":"Provider tva number","type":"string"},"amountIncludingTax":{"format":"double","description":"Invoice amount with tax","type":"number"},"providerName":{"description":"Provider name","type":"string"}}},"CreateStripeSubscriptionResponse":{"type":"object","title":"CreateStripeSubscriptionResponse","properties":{"id":{"description":"Subscription's id from Stripe","type":"string"},"status":{"description":"Status of subscription","type":"string","enum":["completed","released","canceled","not_started","active"]}}},"PaymentSystemProps":{"type":"object","title":"PaymentSystemProps","properties":{"paymentMethod":{"description":"Payment method (needed by Stripe for new users. This info is given by Stripe to the front via AJAX call)","type":"string"},"payerAuthorisationId":{"description":"id use by Gocardless to represent the mandate creation","type":"string"}}},"AmountDetails":{"type":"object","title":"AmountDetails","properties":{"amounts":{"description":"An ID that will be present in the daily bank report. It's used to garantee that a payment was sent","type":"array","items":{"$ref":"#/definitions/AmountDetail"}}}},"Product":{"type":"object","title":"Product","properties":{"id":{"description":"Product id in stripe","type":"string"}}},"JsonNode":{"type":"object","title":"JsonNode"},"CreateSubscription":{"type":"object","title":"CreateSubscription","required":["partyId","productType","quoteId"],"properties":{"paymentSystem":{"description":"Payment system use to create subscription and payment. If not present, the payment system already associated to the party is used","type":"string","enum":["Stripe","Paypal"]},"paymentSystemProps":{"description":"Additionnal properties specific to the payment system","$ref":"#/definitions/PaymentSystemProps"},"partyId":{"description":"The id of the party","type":"string"},"productType":{"description":"The type of product. This product is mapped to a product defined in the payment system","type":"string","enum":["[\"PropertyRenter\""]},"quoteId":{"description":"Quote id to use to calculate price","type":"string"},"startDate":{"format":"date-time","description":"Billing start date (dd/MM/yyyy). If not present, the current date is used Format=[dd/MM/yyyy]","type":"string"}}},"CreatePaypalSubscriptionResponse":{"type":"object","title":"CreatePaypalSubscriptionResponse","properties":{"id":{"description":"Subscription's id from Stripe","type":"string"},"urlToSubscribe":{"description":"Url to subscribe to the new subscription in Paypal","type":"string"}}},"InitiatePaymentResponse":{"type":"object","title":"InitiatePaymentResponse","required":["paymentId"],"properties":{"paymentId":{"description":"An ID that will be present in the daily bank report. It's used to garantee that a payment was sent","type":"string"}}},"CreateStripeSubscription":{"type":"object","title":"CreateStripeSubscription","properties":{"product":{"description":"Subscription's property information","$ref":"#/definitions/Product"},"contact":{"description":"Contact information linked to subscription","$ref":"#/definitions/Contact"},"plan":{"description":"Subscription's property information","$ref":"#/definitions/Plan"}}},"AmountDetail":{"type":"object","title":"AmountDetail","properties":{"amountType":{"description":"An ID that will be present in the daily bank report. It's used to garantee that a payment was sent","type":"string","enum":["PremiumEarned","Fee"]},"amount":{"description":"An ID that will be present in the daily bank report. It's used to garantee that a payment was sent","type":"number"}}},"SwitchSubscriptionResponse":{"type":"object","title":"SwitchSubscriptionResponse","required":["id"],"properties":{"redirectUrl":{"description":"If payment system is paypal, one needs to redirect the user to a Paypal page. This is the URL of this page","type":"string"},"id":{"description":"Subscription ID. If the payment system is Stripe, this is a scheduled subscription id, otherwise it's a subscription ID","type":"string"}}},"UpdateStripePolicyNumber":{"type":"object","title":"UpdateStripePolicyNumber","required":["policyNumber"],"properties":{"policyNumber":{"description":"Policy number of a subscription","type":"string"}}},"InitiatePaymentCreditor":{"type":"object","title":"InitiatePaymentCreditor","required":["iban","name"],"properties":{"country":{"description":"Country code","type":"string"},"iban":{"description":"IBAN of the creditor","type":"string"},"name":{"description":"Name and First Name of the creditor","type":"string"},"addressLine1":{"description":"Address line1 of the creditor (no special chars)","type":"string"},"addressLine2":{"description":"Address line2 of the creditor (no special chars)","type":"string"},"bic":{"description":"BIC of the creditor","type":"string"}}},"CreateGocardlessMandateReponse":{"type":"object","title":"CreateGocardlessMandateReponse","properties":{"redirectUrl":{"description":"Redirect url to create the mandate","type":"string"},"payerAuthorisationId":{"description":"Payer authorisation id","type":"string"}}},"ReserveIdentifiers":{"type":"object","title":"ReserveIdentifiers","properties":{"policyNumber":{"description":"The policyNumber","type":"string"},"partyId":{"description":"The party ID","type":"string"},"claimNumber":{"description":"The claimNumber","type":"string"}}},"ValidatePaymentMethod":{"type":"object","title":"ValidatePaymentMethod","required":["partyId","quoteId"],"properties":{"paymentSystem":{"description":"Payment system use to create subscription and payment. If not present, the payment system already associated to the party is used","type":"string","enum":["Stripe","Paypal"]},"paymentMethod":{"description":"Payment method (needed by Stripe for new users. This info is given by Stripe to the front via AJAX call)","type":"string"},"partyId":{"description":"The id of the party","type":"string"},"quoteId":{"description":"Quote id to use to calculate price","type":"string"}}},"CardInfo":{"type":"object","title":"CardInfo","properties":{"expMonth":{"format":"int64","description":"Month when the credit card expire","type":"integer"},"last4digits":{"description":"Last 4 digits of a credit card","type":"string"},"expYear":{"format":"int64","description":"Year when the credit card expire","type":"integer"},"cardType":{"description":"The brand of the credit card","type":"string"}}},"StructuredCommunicationResponse":{"type":"object","title":"StructuredCommunicationResponse","required":["displayReference","reference"],"properties":{"reference":{"description":"A unique structured communication","type":"string"},"displayReference":{"description":"The structured communication with the \"/\"","type":"string"}}},"Payment":{"type":"object","title":"Payment","required":["amount","coverageEndDate","coverageStartDate"],"properties":{"coverageStartDate":{"format":"date-time","description":"Start coverage start date of the period unpaid Format=[dd/MM/yyyy]","type":"string"},"amount":{"format":"double","description":"Amount due","type":"number"},"coverageEndDate":{"format":"date-time","description":"Start coverage end date of the period unpaid Format=[dd/MM/yyyy]","type":"string"}}},"SwitchSubscription":{"type":"object","title":"SwitchSubscription","required":["partyId","paymentSystem","paymentSystemProps"],"properties":{"paymentSystem":{"description":"Payment system use to create subscription and payment. If not present, the payment system already associated to the party is used","type":"string","enum":["Stripe","Paypal","GoCardLess"]},"paymentSystemProps":{"description":"Additionnal properties specific to the payment system","$ref":"#/definitions/PaymentSystemProps"},"partyId":{"description":"user id","type":"string"}}},"CreateGocardlessMandateTokenReponse":{"type":"object","title":"CreateGocardlessMandateTokenReponse","properties":{"token":{"description":"Token for DropIn","type":"string"}}},"CreateGocardlessMandate":{"type":"object","title":"CreateGocardlessMandate","properties":{"redirectUrl":{"description":"Redirect url in case of success","type":"string"},"partyId":{"description":"user id un cognito","type":"string"}}},"InitiatePaymentCommunication":{"type":"object","title":"InitiatePaymentCommunication","properties":{"unstructured":{"description":"Unstructured communication","type":"string"},"structured":{"description":"Structured communication. If structured communication is present, unstructured is ignored","type":"string"}}},"Refund":{"type":"object","title":"Refund","properties":{"creditCardLast4Digits":{"type":"string"},"amount":{"format":"double","type":"number"},"creditCardType":{"type":"string"},"target":{"type":"string"}}},"ValidatePaymentMethodResponse":{"type":"object","title":"ValidatePaymentMethodResponse","required":["id","status"],"properties":{"redirectUrl":{"description":"If payment system is paypal, one needs to redirect the user to a Paypal page. This is the URL of this page","type":"string"},"customerId":{"type":"string"},"id":{"description":"Payment id in OnHoldPayment table","type":"string"},"status":{"description":"Subscription ID. If the payment system is Stripe, this is a scheduled subscription id, otherwise it's a subscription ID","type":"string","enum":["SUCCESS","FAILED","PENDING"]}}},"PaymentReminderResponse":{"type":"object","title":"PaymentReminderResponse","required":["fee","payments","sessionId","totalAmount"],"properties":{"totalAmount":{"format":"double","description":"Sum of unpaid payment and fee","type":"number"},"payments":{"description":"A list of failed payments","type":"array","items":{"$ref":"#/definitions/Payment"}},"fee":{"format":"double","description":"A link to mollie to process the payment in mollie","type":"number"},"sessionId":{"description":"Session id to create the paiement in Stripe","type":"string"}}},"Cancel":{"type":"object","title":"Cancel","required":["dryRun","endDate","policyNumber"],"properties":{"dryRun":{"description":"Boolean if true process cancel else preview cancel","type":"boolean"},"endDate":{"format":"date-time","description":"End date of the subscription","type":"string"},"policyNumber":{"description":"Policy number linked to subscription to cancel","type":"string"}}},"InitiatePaymentRequest":{"type":"object","title":"InitiatePaymentRequest","required":["amount","creditor","type"],"properties":{"debitor":{"description":"The account that will send the money","type":"string","enum":["Flora"]},"amount":{"description":"The amount of money to send","type":"number"},"identifiers":{"description":"Common identifiers used in reporting","$ref":"#/definitions/InitiatePaymentIdentifiers"},"creditor":{"description":"The person that will receive the money","$ref":"#/definitions/InitiatePaymentCreditor"},"details":{"description":"Non mandatory details, but allow to not query Salesforce to retrieve additional infos","$ref":"#/definitions/InitiatePaymentDetails"},"type":{"description":"Type used for accounting","type":"string","enum":["Invoice","Receipt","Compensation","Other"]},"communication":{"description":"Structured or Unstructured communication, only use in case of outgoing payment","$ref":"#/definitions/InitiatePaymentCommunication"},"amountDetails":{"$ref":"#/definitions/AmountDetails"}}},"ReminderLevel2Request":{"type":"object","title":"ReminderLevel2Request","required":["suspendDate","terminationDate"],"properties":{"suspendDate":{"format":"date-time","description":"Date of policy suspension Format=[dd/MM/yyyy]","type":"string"},"terminationDate":{"format":"date-time","description":"Date of policy termination Format=[dd/MM/yyyy]","type":"string"}}},"RenewSubscriptionResponse":{"type":"object","title":"RenewSubscriptionResponse","required":["id"],"properties":{"id":{"description":"Subscription ID. If the payment system is Stripe, this is a scheduled subscription id, otherwise it's a subscription ID","type":"string"}}},"CreatePortalLinkResponse":{"type":"object","title":"CreatePortalLinkResponse","properties":{"url":{"description":"A temporary URL to redirect the user to the Stripe portal","type":"string"}}},"EventAccounting":{"type":"object","title":"EventAccounting","required":["product","type"],"properties":{"product":{"description":"The type of product the event is related to (Property, Motor, ...)","type":"string","enum":["Property"]},"amount":{"format":"double","description":"A floating number with a precision of two digits that represents the amount of money received or sent by Flora (depending on the field type)","type":"number"},"endDate":{"format":"date-time","description":"If the event is linked to a start and end date (i.e: coverage start date / coverage end date), this field contains the end date Format=[ddMMyyyy]","type":"string"},"active":{"description":"True if event can be part of the report","type":"boolean"},"claimId":{"description":"A reference to a claim via its claim number","type":"string"},"source":{"description":"The transaction system at the origin of the amout received or sent. Allowed values are Paypal, Stripe and Isabel","type":"string","enum":["Stripe","Paypal","Isabel","GoCardLess","Other"]},"type":{"description":"The type of event. This type determines in which reports the data will be stored","type":"string","enum":["PremiumIssued","PremiumEarned","CreditNote","Loss","ClaimCompensationIssued","ClaimCompensationPerformed","ClaimExpenseIssued","ClaimExpensePerformed","RecoveryIssued","RecoveryPerformed"]},"transactionId":{"description":"Reference to a transaction/invoice. This is a unique ID coming from the transaction system","type":"string"},"props":{"description":"A flexible JSON string that depends on the event type","$ref":"#/definitions/JsonNode"},"policyId":{"description":"A reference to a policy via its policy number","type":"string"},"occuranceDate":{"format":"date-time","description":"If the event is linked to a claim, the date of the claim Format=[ddMMyyyy]","type":"string"},"partyId":{"description":"A reference to a party. If the party is a client, then the field contains the cognito ID, otherwise this field can contain something like an enterprise number","type":"string"},"startDate":{"format":"date-time","description":"If the event is linked to a start and end date (i.e: coverage start date / coverage end date), this field contains the start date Format=[ddMMyyyy]","type":"string"}}},"InitiatePaymentIdentifiers":{"type":"object","title":"InitiatePaymentIdentifiers","properties":{"paymentId":{"description":"An ID that will be present in the daily bank report. It's used to garantee that a payment was sent","type":"string"},"policyNumber":{"description":"The policyNumber","type":"string"},"partyId":{"description":"The party ID","type":"string"},"claimNumber":{"description":"The claimNumber","type":"string"}}},"ClaimReserve":{"type":"object","title":"ClaimReserve","required":["category","clientType","occurenceDate","product","reserve","reserveType","status"],"properties":{"product":{"description":"The type of product","type":"string","enum":["PropertyRenter"]},"subCategory":{"description":"The sub category of the claim","type":"string","enum":["CriminalFire","LeakingGasket","BurstPipeHome","BurstPipeWaterCompany","LeakageHome","LeakageNeighbour","WaterOverflow","FloodingOverflowingRiverOrSewage","ElectricalGridIntervention","HomeElectricalSystem","Lightning","Unknown","OutsideWindow","InsideWindow","Screen","GlassStoveTop","SanitaryAppliance","GlassPartInFurniture","GlassFurniture","GreenhouseOrVeranda"]},"clientType":{"description":"The type of customer","type":"string","enum":["B2B","B2C"]},"occurenceDate":{"format":"date-time","description":"When the claim occured Format=[dd-MM-yy]","type":"string"},"reserve":{"format":"float","description":"The current amount in the reserve","type":"number"},"reserveType":{"description":"The type of reserve","type":"string","enum":["Analytical","Actuarial"]},"category":{"description":"The main category of the claim","type":"string","enum":["Fire","PJ","Theft","Storm","Disaster","Attack"]},"closingDate":{"format":"date-time","description":"When the claim was closed Format=[dd-MM-yy]","type":"string"},"openingDate":{"format":"date-time","description":"When the claim was opened Format=[dd-MM-yy]","type":"string"},"status":{"description":"The current status of the claim","type":"string","enum":["InProgress","Closed","Cancelled"]}}},"GetSetupIntentResponse":{"type":"object","title":"GetSetupIntentResponse","properties":{"id":{"description":"SetupIntent's id from Stripe","type":"string"}}},"Context":{"type":"object","title":"Context","required":["returnUrlError","returnUrlSuccess"],"properties":{"returnUrlSuccess":{"description":"Url to call in case of success in paypal","type":"string"},"returnUrlError":{"description":"Url to call in case of error in paypal","type":"string"}}},"InitiatePaymentDetails":{"type":"object","title":"InitiatePaymentDetails","required":["requestedExecutionDate"],"properties":{"requestedExecutionDate":{"format":"date-time","description":"The date when the payment is asked to be executed. Max 1 year in the future","type":"string"},"claim":{"description":"The detail of the claim if the payment is of type Claim. This allows the middleware to not query Salesforce","$ref":"#/definitions/ClaimReserve"},"invoice":{"description":" The detail of the invoice, if field insert invoice in invoice table","$ref":"#/definitions/Invoice"}}},"NextPaymentSystemResponse":{"type":"object","title":"NextPaymentSystemResponse","required":["paymentSystem"],"properties":{"paymentSystem":{"description":"Payment system use to create subscription and payment. If not present, the payment system already associated to the party is used","type":"string","enum":["Stripe","Paypal","GoCardLess"]},"cardType":{"description":"The brand of the credit card","type":"string"},"lastDigit":{"description":" Last digit of payment","type":"string"}}},"Health":{"type":"object","title":"Health","properties":{"status":{"type":"string","enum":["OK","NOK"]}}},"Plan":{"type":"object","title":"Plan","required":["abex"],"properties":{"price":{"format":"double","description":"Subscription price","type":"number"},"abex":{"format":"double","description":"Abex use to calculate quote","type":"number"},"paymentCurrency":{"description":"Currency of payment","type":"string","enum":["eur"]},"startDate":{"format":"date-time","description":"Billing start date (dd/MM/yyyy) Format=[dd/MM/yyyy]","type":"string"},"paymentOccurance":{"description":"Occurance of payment","type":"string","enum":["Monthly"]}}},"RenewSubscription":{"type":"object","title":"RenewSubscription","required":["quoteId","renewalDate"],"properties":{"renewalDate":{"format":"date-time","description":"Policy renewal date (dd/MM/yyyy) Format=[dd/MM/yyyy]","type":"string"},"quoteId":{"description":"Id of the quote with updated pricing and ABEX Format=[dd/MM/yyyy]","type":"string"}}},"CancelSubscriptionResponse":{"type":"object","title":"CancelSubscriptionResponse","properties":{"refund":{"$ref":"#/definitions/Refund"}}},"Contact":{"type":"object","title":"Contact","properties":{"firstname":{"description":"First name of the client","type":"string"},"customerId":{"description":"Customer id, provide customerId to use an existing customer or fill object to create a new one","type":"string"},"name":{"description":"Name of the client","type":"string"},"paymentMethod":{"description":"Payment method received by Stripe in front end","type":"string"},"email":{"description":"User email","type":"string"}}},"UpsertReserveRequest":{"type":"object","title":"UpsertReserveRequest","properties":{"identifiers":{"description":"Common identifiers","$ref":"#/definitions/ReserveIdentifiers"},"claim":{"description":"The detail of the claim if the payment is of type Claim. This allows the middleware to not query Salesforce","$ref":"#/definitions/ClaimReserve"}}},"CreatePaypalSubscription":{"type":"object","title":"CreatePaypalSubscription","required":["contact","plan","product"],"properties":{"product":{"description":"Subscription's property information","$ref":"#/definitions/Product"},"contact":{"description":"Contact information linked to subscription","$ref":"#/definitions/Contact"},"context":{"$ref":"#/definitions/Context"},"plan":{"description":"Subscription's property information","$ref":"#/definitions/Plan"}}},"ChangeEmail":{"type":"object","title":"ChangeEmail","required":["email","partyId"],"properties":{"partyId":{"description":"The id of the party used to retrieve the payment system","type":"string"},"email":{"description":"The new customer email address to update into its payment system","type":"string"}}},"CreateSubscriptionResponse":{"type":"object","title":"CreateSubscriptionResponse","required":["id"],"properties":{"redirectUrl":{"description":"If payment system is paypal, one needs to redirect the user to a Paypal page. This is the URL of this page","type":"string"},"id":{"description":"Subscription ID. If the payment system is Stripe, this is a scheduled subscription id, otherwise it's a subscription ID","type":"string"}}},"RefreshCardNumberResponse":{"type":"object","title":"RefreshCardNumberResponse","properties":{"last4Digits":{"description":"The last 4 digits of the card number","type":"string"}}},"ValidatePaymentMethodCallbackResponse":{"type":"object","title":"ValidatePaymentMethodCallbackResponse","required":["status"],"properties":{"status":{"description":"Status of on hold payment","type":"string","enum":["SUCCESS","FAILED"]}}},"UpdatePaypalPolicyNumber":{"type":"object","title":"UpdatePaypalPolicyNumber","required":["policyNumber"],"properties":{"policyNumber":{"description":"Policy number of a subscription","type":"string"}}},"Empty":{"title":"Empty Schema","type":"object"}},"swagger":"2.0","info":{"license":{"name":"Apache 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0"},"contact":{},"description":"Api Documentation","termsOfService":"urn:tos","title":"Api Documentation","version":"1.0"},"tags":[{"name":"accounting-resource","description":"Accounting Resource"},{"name":"event-resource","description":"Event Resource"},{"name":"health-resource","description":"Health Resource"},{"name":"payment-resource","description":"Payment Resource"},{"name":"paypal-subscription-resource","description":"Paypal Subscription Resource"},{"name":"reminder-resource","description":"Reminder Resource"},{"name":"reserve-resource","description":"Reserve Resource"},{"name":"scheduler-resource","description":"Scheduler Resource"},{"name":"stripe-subscription-resource","description":"Stripe Subscription Resource"},{"name":"subscription-resource","description":"Subscription Resource"}],"x-amazon-apigateway-binary-media-types":[""]}